{
	"name": "CUDA",
	"image": "mcr.microsoft.com/devcontainers/base:ubuntu", // https://hub.docker.com/r/nvidia/cuda/tags
	"features": {
		"ghcr.io/devcontainers/features/nvidia-cuda:1": {
			"installCudnn": true
		},
		"ghcr.io/devcontainers/features/python:1": {
			"installJupyterlab": true
		},
		"ghcr.io/devcontainers/features/git:1": {},
		"ghcr.io/devcontainers/features/git-lfs:1": {}
	},
	// "build": {
	// 	"context": "..",
	// 	"dockerfile": "../Dockerfile",
	// 	"args": {
	// 		"NODE_VERSION": "none"
	// 	},
	// },
	"runArgs": [
		"--gpus",
		"all"
	],
	"hostRequirements": {
		"gpu": "optional"
	},
	"remoteEnv": {
		"PATH": "${containerEnv:PATH}:/usr/local/cuda/bin",
		"LD_LIBRARY_PATH": "$LD_LIBRARY_PATH:/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64",
		"XLA_FLAGS": "--xla_gpu_cuda_data_dir=/usr/local/cuda"
	},
	// "updateContentCommand": "bash .devcontainer/install-dev-tools.sh",
	"postCreateCommand": [
		"nvidia-smi"
	],
	"customizations": {
		"vscode": {
			"extensions": [
				"Codeium.codeium",
				"ms-python.python",
				"ms-python.vscode-pylance",
				"ms-toolsai.jupyter",
				"ms-toolsai.vscode-jupyter-cell-tags",
				"ms-toolsai.jupyter-keymap",
				"ms-toolsai.vscode-jupyter-slideshow",
				"ms-toolsai.vscode-jupyter-powertoys"
			]
		}
	}
}